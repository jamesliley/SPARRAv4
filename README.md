## SPARRAv4

# Overview

This is a general repository for SPARRAv4 pipelines, functions and figures. 

# Organisation

This repository contains four folders:

1. **Analysis**: containing figures, summaries and co-ordinates
2. **Pipelines**: containing code to fit models and draw figures, and to demonstrate calibration estimator
3. **SPARRAv4**: containing functions
4. **Diagrams**: containing diagrams and drawings

It also contains four files

1. **disclosure\_request\_form.doc**: a description of what all files in **Analysis** are, with a focus on how non-identifiability of individuals is maintained
2. **SPARRA\_analyses.csv**: a table of all figures, what they show, and where they appear in the text. This is also available in a [google sheets file](https://docs.google.com/spreadsheets/d/1zDMxMdcF4E6WlqFBs8Ge03cstLR6hqzB1zQidxVZTew/edit?usp=sharing).
3. **Manuscript.pdf**: the current manuscript, including supplementary material
4. **README.md**: this file

# Use

All figures are generated by code in either 
 - **Pipelines/main_pipeline.R**
 - **Pipelines/time_attenuation.R** 

A small number of analyses are performed by code in
 - **Analysis/external/**

To find the code to generate a plot, search for its basename in these files.

Generally, for each plot  **X.pdf** there is an associated file **X.txt**. This file contains all the data that was plotted. Each file firstly contains a nominally human-readable form of the data, then a line '***************', and then some lines which can be read into R directly to recreate the variables used (using dput). 

Figures were drawn on the windows machine in the NSH, for which package versions are listed as part of the R script **SPARRAv4/ehr\_mockup.R** (object _ip\_windows_).